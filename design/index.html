<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Card Mania — System Design Map</title>
    <script src="./vendor/go.js"></script>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="shell">
      <header>
        <h1>Card Mania — System Design Map</h1>
        <p>Top-down UML-style view of key app layers. Extend by editing files in <code>/design</code>.</p>
      </header>
      <div class="grid">
        <div class="diagram-card">
          <div class="diagram-toolbar">
            <div>
              <strong>Diagram</strong>
              <span class="muted">Pan/zoom with mouse or trackpad</span>
            </div>
          </div>
          <div id="diagram" class="diagram" aria-label="GoJS diagram canvas"></div>
        </div>
        <div className="side-panel">
          <div class="card">
            <h2>Current Components & Extension Points</h2>
            <ul>
              <li><strong>Domain</strong>: Card, Collection, Wishlist entities and their relations.</li>
              <li><strong>Data</strong>: Repositories and Supabase client for reads/writes.</li>
              <li><strong>UI</strong>: Screens, cards, list views backed by services.</li>
              <li><strong>Edge</strong>: Pricing proxy / image proxy adapters.</li>
              <li><strong>Extensible</strong>: Add flows for offers, sharing, or analytics by extending adapters/services.</li>
            </ul>
          </div>
          <div class="card">
            <h2>Legend</h2>
            <div class="legend">
              <div class="pill"><span class="swatch" style="background:#DCE7FF"></span>UI</div>
              <div class="pill"><span class="swatch" style="background:#E6FFF5"></span>Domain</div>
              <div class="pill"><span class="swatch" style="background:#FFF5E5"></span>Data</div>
              <div class="pill"><span class="swatch" style="background:#FFE3ED"></span>Infra</div>
              <div class="pill"><span class="swatch" style="background:#F3E8FF"></span>Edge</div>
              <div class="pill"><span class="swatch" style="background:#E8E9FF"></span>Future</div>
              <div class="pill"><span class="swatch" style="background:#DBEAFE"></span>AWS</div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script type="module" src="./dist/diagram.js"></script>
  </body>
</html>
